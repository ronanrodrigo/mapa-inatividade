// See post: http://asmaloney.com/2015/06/code/clustering-markers-on-leaflet-maps
//var latLons = [{lat: "-26.2666631", lon: "-52.6852905"}, {lat: "-23.6598589", lon: "-52.6054439"}, {lat: "-26.2295983", lon: "-52.6712473"}, {lat: "-24.9616761", lon: "-53.4360665"}, {lat: "-25.4274072", lon: "-49.2686305"}, {lat: "-23.31239545", lon: "-51.1575631100188"}, {lat: "-23.7626518", lon: "-53.3138453"}, {lat: "-24.5569492", lon: "-54.0867134"}, {lat: "-24.9463759", lon: "-53.4345768"}, {lat: "-24.9463759", lon: "-53.4345768"}, {lat: "-25.0679552", lon: "-50.1184002"}, {lat: "-25.4592285", lon: "-49.2604749"}, {lat: "-25.4379645", lon: "-49.2765422"}, {lat: "-25.4335173", lon: "-49.2699287"}, {lat: "-23.316572", lon: "-51.1564042"}, {lat: "-27.5937606", lon: "-48.5589226"}, {lat: "-27.5972213", lon: "-48.5489856"}, {lat: "-26.8813155", lon: "-49.0683306"}, {lat: "-27.2086449", lon: "-49.6276238"}, {lat: "-26.8731384", lon: "-49.0889741290899"}, {lat: "-26.3029495", lon: "-48.8461316"}, {lat: "-26.9994018", lon: "-51.1613881"}, {lat: "-26.9203222", lon: "-49.0647002"}, {lat: "-26.3248671", lon: "-48.8292786"}, {lat: "-27.1233567", lon: "-48.9182729"}, {lat: "-26.8709228", lon: "-49.09281"}, {lat: "-27.5937606", lon: "-48.5589226"}, {lat: "-25.0952329", lon: "-50.1678008"}, {lat: "-25.4592285", lon: "-49.2604749"}, {lat: "-24.9521993", lon: "-53.4493459"}, {lat: "-23.3165714", lon: "-51.1551145"}, {lat: "-25.4592285", lon: "-49.2604749"}, {lat: "-25.4303091", lon: "-49.3534141"}, {lat: "-25.4395028", lon: "-49.2719928"}, {lat: "-23.4099383", lon: "-51.4376964"}, {lat: "-25.2872345", lon: "-54.0955394"}, {lat: "-25.3951057", lon: "-51.4710853"}, {lat: "-24.9532128", lon: "-50.112006"}, {lat: "-26.2311335", lon: "-52.6811759"}, {lat: "-23.65846", lon: "-52.6082546"}, {lat: "-26.2243564", lon: "-52.6724764"}, {lat: "-27.290215", lon: "-50.5756683"}, {lat: "-24.5569492", lon: "-54.0867134"}, {lat: "-27.3424726", lon: "-51.6108752"}, {lat: "-25.4853582", lon: "-49.2455228"}, {lat: "-27.2302800576923", lon: "-52.0267407307692"}, {lat: "-27.1029905", lon: "-52.609653"}, {lat: "-25.2984303", lon: "-54.0872355"}, {lat: "-23.0480098", lon: "-50.0682288"}, {lat: "-26.8868343", lon: "-48.6624529"}, {lat: "-24.2830625", lon: "-53.8350683"}, {lat: "-25.4344253", lon: "-49.2585481"}, {lat: "-24.9478494", lon: "-53.472255"}, {lat: "-25.5274627", lon: "-49.2924349"}, {lat: "-26.9994018", lon: "-51.1613881"}, {lat: "-27.0632115", lon: "-53.1624264"}, {lat: "-26.8376497", lon: "-52.9871057"}, {lat: "-27.0306001", lon: "-50.916591"}, {lat: "-27.0306001", lon: "-50.916591"}, {lat: "-26.310497", lon: "-48.850465"}, {lat: "-26.3858616", lon: "-50.8791319"}, {lat: "-26.9136654", lon: "-49.0751763"}, {lat: "-24.9521993", lon: "-53.4493459"}, {lat: "-23.4541632", lon: "-51.9532139"}, {lat: "-25.6344245", lon: "-49.292998"}, {lat: "-27.0306001", lon: "-50.916591"}, {lat: "-23.4099383", lon: "-51.4376964"}, {lat: "-23.3109235", lon: "-51.1551321"}, {lat: "-25.424763", lon: "-49.3525284"}, {lat: "-25.4442174", lon: "-49.2698646"}, {lat: "-25.3646997", lon: "-51.4611657"}, {lat: "-25.4355094", lon: "-49.2613441"}, {lat: "-25.4355094", lon: "-49.2613441"}, {lat: "-26.7328193", lon: "-49.1773196"}, {lat: "-27.0986738", lon: "-48.9167252"}, {lat: "-26.8733501", lon: "-52.4100436"}, {lat: "-23.3112877", lon: "-51.1595022"}, {lat: "-25.4592285", lon: "-49.2604749"}, {lat: "-23.5492933", lon: "-51.4518935"}, {lat: "-25.4984643", lon: "-49.3091254"}, {lat: "-23.3165714", lon: "-51.1551145"}, {lat: "-23.4420108", lon: "-51.8683435"}, {lat: "-26.8798369", lon: "-49.0678891"}, {lat: "-27.2932557", lon: "-50.5822843"}, {lat: "-25.4306361", lon: "-49.2854372"}, {lat: "-19.92012655", lon: "-43.9418385357904"}, {lat: "-26.0720562", lon: "-53.0439024"}];

var map = L.map( 'map', {
  center: [customers[5].lat, customers[5].lon],
  zoom: 4
});

L.tileLayer( 'http://otile1.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="http://osm.org/copyright" title="OpenStreetMap" target="_blank">OpenStreetMap</a> contributors | Tiles Courtesy of <a href="http://www.mapquest.com/" title="MapQuest" target="_blank">MapQuest</a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png" width="16" height="16">',
}).addTo(map);

var markerClusters = L.markerClusterGroup();

for ( var i = 0; i < customers.length; ++i )
{
  var marker = L.marker([customers[i].lat, customers[i].lon])
  marker.bindPopup(JSON.stringify(customers[i].address))
  markerClusters.addLayer(marker);
}

map.addLayer(markerClusters);